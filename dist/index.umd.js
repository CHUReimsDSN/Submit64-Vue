(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("quasar")):typeof define=="function"&&define.amd?define(["exports","vue","quasar"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a["submit64-vue"]={},a.Vue,a.Quasar))})(this,function(a,e,s){"use strict";var A=Object.defineProperty;var E=(a,e,s)=>e in a?A(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var r=(a,e,s)=>E(a,typeof e!="symbol"?e+"":e,s);const f={class:"flex column"},g={class:"flex row items-center no-wrap q-pt-sm q-gutter-x-sm"},h=e.defineComponent({__name:"DefaultActionComponent",props:{isLoadingSubmit:{type:Boolean},formApi:{},submit:{type:Function},reset:{type:Function},clear:{type:Function}},setup(c){const t=c;function n(){const i=t.formApi.form.formStyle;return{outline:i.fieldOutlined,rounded:i.fieldRounded,square:i.fieldSquare,dense:i.fieldDense,color:i.fieldColor,noCaps:!0}}return(i,o)=>(e.openBlock(),e.createElementBlock("div",f,[e.createElementVNode("div",g,[e.createVNode(e.unref(s.QBtn),e.mergeProps(n(),{label:"Enregistrer",loading:t.isLoadingSubmit,onClick:t.submit}),null,16,["loading","onClick"]),t.reset?(e.openBlock(),e.createBlock(e.unref(s.QBtn),e.mergeProps({key:0},n(),{loading:t.isLoadingSubmit,label:"RÃ©initialiser",onClick:t.reset}),null,16,["loading","onClick"])):e.createCommentVNode("",!0),t.clear?(e.openBlock(),e.createBlock(e.unref(s.QBtn),e.mergeProps({key:1},n(),{loading:t.isLoadingSubmit,label:"Vider",onClick:t.clear}),null,16,["loading","onClick"])):e.createCommentVNode("",!0)])]))}}),u={class:"flex row items-center"},_={class:"text-body1 text-weight-medium"},y={class:"flex column q-gutter-md"},C=e.defineComponent({__name:"DefaultSectionComponent",props:{formApi:{},sectionApi:{}},setup(c){const t=c;return(n,i)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",u,[t.sectionApi.section.icon?(e.openBlock(),e.createBlock(e.unref(s.QIcon),{key:0,name:t.sectionApi.section.icon,size:"sm",color:t.formApi.form.formStyle.fieldColor},null,8,["name","color"])):e.createCommentVNode("",!0),e.createElementVNode("div",_,e.toDisplayString(t.sectionApi.section.label),1)]),e.createElementVNode("div",y,[e.renderSlot(n.$slots,"default")])]))}}),k=e.defineComponent({__name:"DefaultWrapperResetComponent",props:{reset:{type:Function}},setup(c){const t=c;return(n,i)=>{const o=e.resolveComponent("q-icon");return e.openBlock(),e.createBlock(o,{name:"reset",class:"cursor-pointer",onClick:i[0]||(i[0]=l=>t.reset())})}}}),S=e.defineComponent({__name:"DefaultAssociationDisplayComponent",props:{associationName:{},entry:{},itemProps:{}},setup(c){const t=c;return(n,i)=>(e.openBlock(),e.createBlock(e.unref(s.QItem),e.normalizeProps(e.guardReactiveProps(t.itemProps)),{default:e.withCtx(()=>[e.createVNode(e.unref(s.QItemSection),null,{default:e.withCtx(()=>[e.createVNode(e.unref(s.QItemLabel),null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.entry.label),1)]),_:1})]),_:1})]),_:1},16))}}),b={class:"flex column"},N=e.defineComponent({__name:"DefaultOrphanErrorsComponent",props:{orphanErrors:{},formApi:{}},setup(c){const t=c;return(n,i)=>(e.openBlock(),e.createElementBlock("div",b,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.orphanErrors,(o,l)=>(e.openBlock(),e.createElementBlock("div",{key:l,class:"q-field--error q-field__bottom text-negative"},e.toDisplayString(l)+" : "+e.toDisplayString(o.join(",")),1))),128))]))}}),m=class m{constructor(){r(this,"_formSettings");r(this,"_formStyle");r(this,"_actionComponent");r(this,"_orphanErrorsComponent");r(this,"_sectionComponent");r(this,"_wrapperResetComponent");r(this,"_associationDisplayComponent");this._formSettings={rulesBehaviour:"ondemand",dateFormat:"DD/MM/YYYY",datetimeFormat:"DD/MM/YYYY HH:mm",renderBackendHint:!0},this._formStyle={fieldOutlined:!1,fieldDense:!0,fieldHideBottomSpace:!0,fieldFilled:!1,fieldStandout:!1,fieldBorderless:!1,fieldRounded:!1,fieldSquare:!1,fieldClass:"",fieldColor:"primary",fieldBgColor:"white"},this._actionComponent=h,this._orphanErrorsComponent=N,this._sectionComponent=C,this._wrapperResetComponent=k,this._associationDisplayComponent=S}static registerGlobalFormSetting(t){this._instance._formSettings={...this._instance._formSettings,...t}}static registerGlobalFormStyle(t){this._instance._formStyle={...this._instance._formStyle,...t}}static registerGlobalActionComponent(t){this._instance._actionComponent=t}static registerGlobalOrphanErrorsComponent(t){this._instance._orphanErrorsComponent=t}static registerGlobalSectionComponent(t){this._instance._sectionComponent=t}static registerGlobalWrapperResetComponent(t){this._instance._wrapperResetComponent=t}static registerGlobalAssociationDisplayComponent(t){this._instance._associationDisplayComponent=t}static getGlobalFormSetting(){return this._instance._formSettings}static getGlobalFormStyle(){return this._instance._formStyle}static getGlobalActionComponent(){return this._instance._actionComponent}static getGlobalOrphanErrorComponent(){return this._instance._orphanErrorsComponent}static getGlobalSectionComponent(){return this._instance._sectionComponent}static getGlobalWrapperResetComponent(){return this._instance._wrapperResetComponent}static getGlobalAssociationDisplayComponent(){return this._instance._associationDisplayComponent}};r(m,"_instance",new m);let d=m;class p{constructor(t){r(this,"formApi");r(this,"events",[]);this.formApi=t}when(t,n){const i=t,o=n,l=new F(i,o,this.formApi);return this.events.push(l),new B(l)}static create(t){return new p(t)}static getEventsObjectFromInstance(t){const n={fields:{},sections:{},form:{}};return t.events.forEach(i=>{const o=i.getTarget();switch(o.target){case"field":n.fields[o.target]||(n.fields[o.target]={}),n.fields[o.target][o.key]||(n.fields[o.target][o.key]=[]),n.fields[o.target][o.key].push(i.getActionCallback());break;case"section":n.sections[o.target]||(n.sections[o.target]={}),n.sections[o.target][o.key]||(n.sections[o.target][o.key]=[]),n.sections[o.target][o.key].push(i.getActionCallback());break;case"form":n.form[o.key]||(n.form[o.key]=[]),n.form[o.key].push(i.getActionCallback());break}}),n}}class B{constructor(t){r(this,"formEvent");this.formEvent=t}then(t){return this.formEvent.actions.push(t),this}}class F{constructor(t,n,i){r(this,"type");r(this,"data");r(this,"formApi");r(this,"actions",[]);r(this,"cyclicActionCallSet",new Set);this.type=t,this.data=n,this.formApi=i}getTarget(){switch(this.type){case"Field is updated":return{target:"field",targetName:this.data.fieldName,key:"onUpdate"};case"Field is valid":return{target:"field",targetName:this.data.fieldName,key:"onIsValid"};case"Field is validated":return{target:"field",targetName:this.data.fieldName,key:"onValidated"};case"Field is cleared":return{target:"field",targetName:this.data.fieldName,key:"onClear"};case"Field is reseted":return{target:"field",targetName:this.data.fieldName,key:"onReset"};case"Field confirm value statement":return{target:"field",targetName:this.data.fieldName,key:"onConfirmStatement"};case"Field is hidden":return{target:"field",targetName:this.data.fieldName,key:"onHide"};case"Field is unhidden":return{target:"field",targetName:this.data.fieldName,key:"onUnhide"};case"Section is valid":return{target:"section",targetName:this.data.sectionName,key:"onReset"};case"Section is hidden":return{target:"section",targetName:this.data.sectionName,key:"onHide"};case"Section is unhidden":return{target:"section",targetName:this.data.sectionName,key:"onUnhide"};case"Section is cleared":return{target:"section",targetName:this.data.sectionName,key:"onClear"};case"Section is reseted":return{target:"section",targetName:this.data.sectionName,key:"onReset"};case"Section is validated":return{target:"section",targetName:this.data.sectionName,key:"onValidated"};case"Form is ready":return{target:"form",key:"onReady"};case"Form is submited":return{target:"form",key:"onSubmit"};case"Form is updated":return{target:"form",key:"onUpdate"};case"Form is cleared":return{target:"form",key:"onClear"};case"Form is reseted":return{target:"form",key:"onReset"};case"Form is valid":return{target:"form",key:"onIsValid"};case"Form is validated":return{target:"form",key:"onValidated"};default:return console.warn(`Submit64 -> unhandled event target : ${this.type}`),{target:null}}}getActionCallback(){return()=>{this.cyclicActionCallSet.add(this.type),this.actions.forEach(t=>{t(this.formApi)}),this.cyclicActionCallSet.clear()}}}a.DynamicLogicBuilder=p,a.Submit64=d,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
