(function(m,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("quasar")):typeof define=="function"&&define.amd?define(["exports","vue","quasar"],e):(m=typeof globalThis<"u"?globalThis:m||self,e(m["submit64-vue"]={},m.Vue,m.Quasar))})(this,function(m,e,s){"use strict";var je=Object.defineProperty;var Ie=(m,e,s)=>e in m?je(m,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[e]=s;var h=(m,e,s)=>Ie(m,typeof e!="symbol"?e+"":e,s);const F=class F{constructor(){h(this,"_formSettings");h(this,"_formStyleConfig");h(this,"_actionComponent");h(this,"_sectionComponent");h(this,"_wrapperResetComponent")}static registerGlobalFormSetting(t){this._instance._formSettings=t}static registerGlobalFormStyleSetting(t){this._instance._formStyleConfig=t}static registerGlobalActionComponent(t){this._instance._actionComponent=t}static registerGlobalSectionComponent(t){this._instance._sectionComponent=t}static registerGlobalWrapperResetComponent(t){this._instance._wrapperResetComponent=t}static getGlobalFormSetting(){return this._instance._formSettings}static getGlobalFormStyleConfig(){return this._instance._formStyleConfig}static getGlobalActionComponent(){return this._instance._actionComponent}static getGlobalSectionComponent(){return this._instance._sectionComponent}static getGlobalWrapperResetComponent(){return this._instance._wrapperResetComponent}};h(F,"_instance",new F);let p=F;const $=Symbol();function q(l,t){const o=[],n=[];return l.forEach(r=>{switch(r.type){case"required":o.push(w());break;case"absence":o.push(z());break;case"acceptance":o.push(P());break;case"inclusion":const i=r;o.push(E(i.including));break;case"exclusion":const a=r;o.push(L(a.excluding));break;case"backend":o.push(w());break;case"allowNull":n.push("allowNull");break;case"allowBlank":n.push("allowBlank");break;case"positiveNumber":o.push(G());break;case"lessThanOrEqualNumber":const c=r;if(c.less_than){o.push(Q(()=>c.less_than));break}case"lessThanNumber":const f=r;if(f.less_than){o.push(U(()=>f.less_than));break}case"greaterThanOrEqualNumber":const g=r;if(g.greater_than){o.push(H(()=>g.greater_than));break}case"greaterThanNumber":const d=r;if(d.greater_than){o.push(A(()=>d.greater_than));break}case"equalToNumber":const b=r;if(b.equal_to){o.push(Y(()=>b.equal_to));break}case"otherThanNumber":const N=r;if(N.other_than){o.push(J(()=>N.other_than));break}case"numberIntegerOnly":o.push(K());break;case"numberNumericOnly":o.push(X());break;case"numberEvenOnly":o.push(Z());break;case"numberOddOnly":o.push(M());break;case"lessThanOrEqualStringLength":const D=r;if(D.less_than){o.push(W(()=>D.less_than));break}case"lessThanStringLength":const V=r;if(V.less_than){o.push(v(()=>V.less_than));break}case"greaterThanOrEqualStringLength":const T=r;if(T.greater_than){o.push(ee(()=>T.greater_than));break}case"greaterThanStringLength":const x=r;if(x.greater_than){o.push(te(()=>x.greater_than));break}case"equalToString":const u=r;if(u.equal_to){o.push(oe(()=>u.equal_to));break}case"betweenStringLength":const C=r;o.push(ne(()=>C.min,()=>C.max));break;case"equalToStringLength":const S=r;o.push(le(()=>S.equal_to));break;case"otherThanString":const O=r;o.push(re(()=>O.other_than));break;case"lessThanOrEqualDate":const B=r;o.push(k(t.dateFormat)),o.push(ae(()=>B.less_than,t.dateFormat));break;case"lessThanDate":const R=r;o.push(k(t.dateFormat)),o.push(ie(()=>R.less_than,t.dateFormat));break;case"greaterThanOrEqualDate":const qe=r;o.push(k(t.dateFormat)),o.push(se(()=>qe.greater_than,t.dateFormat));break;case"greaterThanDate":const Le=r;o.push(k(t.dateFormat)),o.push(ce(()=>Le.greater_than,t.dateFormat));break;case"equalToDate":const ze=r;o.push(k(t.dateFormat)),o.push(de(()=>ze.equal_to,t.dateFormat));break;case"otherThanDate":const Pe=r;o.push(k(t.dateFormat)),o.push(ue(()=>Pe.other_than,t.dateFormat));break}}),n.length>0?n.map(r=>{switch(r){case"allowBlank":return I(o);case"allowNull":return j(o)}}):o}function w(){return l=>!!l||"Ce champ est requis"}function E(l){return t=>l.includes(String(t))||`Doit être contenu dans ${l.toString()}`}function L(l){return t=>!l.includes(String(t)||`Ne doit pas être contenu dans ${E.toString()}`)}function z(){return l=>!l||"Ce champ doit être vide"}function P(){return l=>!!l||"Doit être accepté"}function j(l){return t=>(t===null||l.forEach(o=>{const n=o(t);if(n!==!0)return n}),!0)}function I(l){return t=>(t===""||l.forEach(o=>{const n=o(t);if(n!==!0)return n}),!0)}function G(){return l=>Number(l)>0||"Val. positive uniquement"}function Q(l){return t=>{const o=l();return Number(t)<=o||`Inf. ou égal à ${o}`}}function U(l){return t=>{const o=l();return Number(t)<o||`Inf. ${o}`}}function H(l){return t=>{const o=l();return Number(t)>=o||`Sup. ou égal à ${o}`}}function A(l){return t=>{const o=l();return Number(t)>o||`Sup. à ${o}`}}function Y(l,t){const o=l();return n=>Number(n)===o||`Égale à ${o}`}function J(l,t){const o=l();return n=>Number(n)!==o||`Doit être différent de ${l}`}function K(){return l=>/^-?\d+$/.test(String(l).trim())||"Nombre entier uniquement"}function X(){return l=>/^-?\d+(\.\d+)?$/.test(String(l).trim())||"Caractère numérique uniquement"}function Z(){return l=>Number.isInteger(Number(l))&&Number(l)%2===0||"Nombre pair uniquement"}function M(){return l=>Number.isInteger(Number(l))&&Number(l)%2===1||"Nombre impair uniquement"}function W(l){const t=l();return o=>String(o).length<=t||`Inf. ou égal à ${t}`}function v(l){const t=l();return o=>String(o).length<t||`Inf. à ${t}`}function ee(l){const t=l();return o=>String(o).length>=t||`Sup. ou égal à ${t}`}function te(l){const t=l();return o=>String(o).length>t||`Sup. à ${t}`}function ne(l,t){const o=l(),n=t();return r=>String(r).length>=o&&String(r).length<=n||`Entre ${o} et ${n}`}function oe(l,t){const o=l();return n=>String(n)===o||`Égale à ${o}`}function le(l){const t=l();return o=>String(o).length===t||`Doit contenir ${t} caractères`}function re(l,t){const o=l();return n=>String(n)!==o||`Doit être différent de ${o}`}function ae(l,t){const o=l();return n=>!Number.isNaN(s.date.extractDate(String(n),t).getTime())&&s.date.extractDate(String(n),t)<=s.date.extractDate(o,t)||`Inf. ou égal à ${s.date.formatDate(o,t)}`}function ie(l,t){const o=l();return n=>!Number.isNaN(s.date.extractDate(String(n),t).getTime())&&s.date.extractDate(String(n),t)<s.date.extractDate(o,t)||`Inf. à ${s.date.formatDate(o,t)}`}function se(l,t){const o=l();return n=>!Number.isNaN(s.date.extractDate(String(n),t).getTime())&&s.date.extractDate(String(n),t)>=s.date.extractDate(o,t)||`Sup. ou égal à ${s.date.formatDate(o,t)}`}function ce(l,t){const o=l();return n=>!Number.isNaN(s.date.extractDate(String(n),t).getTime())&&s.date.extractDate(String(n),t)>s.date.extractDate(o,t)||`Sup. à ${s.date.formatDate(o,t)}`}function de(l,t,o){const n=l();return r=>s.date.extractDate(String(r),t)===s.date.extractDate(n,t)||`Égale à ${s.date.extractDate(n,t)}`}function ue(l,t,o){const n=l();return r=>s.date.extractDate(String(r),t)!==s.date.extractDate(n,t)||`Doit être différent de ${n}`}function k(l){return t=>!Number.isNaN(s.date.extractDate(String(t),l).getTime())||"Date invalide"}const fe={computeServerRules:q},_=e.defineComponent({__name:"FieldWrapper",props:{field:{}},setup(l,{expose:t}){const o=l,n=e.inject($),r=e.ref();function i(){return r.value}function a(){n&&(r.value=n.getDefaultDataByFieldName(o.field.metadata.field_name))}function c(){switch(typeof r.value){case"boolean":r.value=!1;case"string":r.value="";case"number":r.value=0;case"object":r.value={}}}function f(){return fe.computeServerRules(o.field.rules??[],n.getFormFactory().formSettings)}function g(d){r.value=d}return t({reset:a,clear:c,getValue:i}),e.onMounted(()=>{var b;a();const d=(b=e.getCurrentInstance())==null?void 0:b.proxy;d&&n&&n.registerRef(o.field.metadata.field_name,d)}),(d,b)=>(e.openBlock(),e.createElementBlock("div",null,[o.field.resetable?e.renderSlot(d.$slots,"reset",{key:0,actionProps:{reset:a}},()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(n).getFormFactory().wrapperResetComponent),{reset:a}))]):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"default",{propsWrapper:{modelValue:r.value,modelValueOnUpdate:g,field:d.field,injectForm:e.unref(n),reset:a,clear:c,getComputedRules:f}})]))}}),me=e.defineComponent({__name:"StringField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory(),i=r.formSettings,a=r.formStyleConfig;return{"onUpdate:modelValue":c=>n.modelValueOnUpdate(c),modelValue:n.modelValue,lazyRules:i.rulesBehaviour==="lazy",clearable:n.field.clearable,rules:n.getComputedRules(),onClear:n.clear,label:n.field.label,hint:n.field.hint,outlined:a.fieldOutlined,filled:a.fieldFilled,standout:a.fieldStandout,borderless:a.fieldBorderless,rounded:a.fieldRounded,square:a.fieldSquare,dense:a.fieldDense,hideBottomSpace:a.fieldHideBottomSpace,color:a.fieldColor,bgColor:a.fieldBgColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QInput),e.normalizeProps(e.guardReactiveProps(o(i))),null,16)]),_:1},8,["field"]))}}),ge=e.defineComponent({__name:"TextField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory(),i=r.formSettings,a=r.formStyleConfig;return{"onUpdate:modelValue":c=>n.modelValueOnUpdate(c),modelValue:n.modelValue,lazyRules:i.rulesBehaviour==="lazy",clearable:n.field.clearable,rules:n.getComputedRules(),onClear:n.clear,label:n.field.label,hint:n.field.hint,outlined:a.fieldOutlined,filled:a.fieldFilled,standout:a.fieldStandout,borderless:a.fieldBorderless,rounded:a.fieldRounded,square:a.fieldSquare,dense:a.fieldDense,hideBottomSpace:a.fieldHideBottomSpace,color:a.fieldColor,bgColor:a.fieldBgColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QInput),e.mergeProps(o(i),{type:"textarea"}),null,16)]),_:1},8,["field"]))}}),he={class:"row items-center justify-end"},be=e.defineComponent({__name:"DateField",props:{field:{}},setup(l){const t=l,o=e.ref();function n(c){const f=c.injectForm.getFormFactory(),g=f.formSettings,d=f.formStyleConfig;return{"onUpdate:modelValue":b=>c.modelValueOnUpdate(b),modelValue:c.modelValue,lazyRules:g.rulesBehaviour==="lazy",clearable:c.field.clearable,rules:c.getComputedRules(),onClear:c.clear,label:c.field.label,hint:c.field.hint,outlined:d.fieldOutlined,filled:d.fieldFilled,standout:d.fieldStandout,borderless:d.fieldBorderless,rounded:d.fieldRounded,square:d.fieldSquare,dense:d.fieldDense,hideBottomSpace:d.fieldHideBottomSpace,color:d.fieldColor,bgColor:d.fieldBgColor,class:c.field.cssClass}}function r(c){return{size:"sm",color:"primary",name:"event",class:"cursor-pointer"}}function i(c){return{"onUpdate:modelValue":f=>c.modelValueOnUpdate(f),modelValue:c.modelValue,mask:c.injectForm.getFormFactory().formSettings.dateFormat}}function a(){o.value&&o.value.hide()}return(c,f)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:g})=>[e.createVNode(e.unref(s.QInput),e.normalizeProps(e.guardReactiveProps(n(g))),{append:e.withCtx(()=>[e.createVNode(e.unref(s.QIcon),e.normalizeProps(e.guardReactiveProps(r())),{default:e.withCtx(()=>[e.createVNode(e.unref(s.QPopupProxy),{ref_key:"popupProxyRef",ref:o,cover:"","transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(e.unref(s.QDate),e.normalizeProps(e.guardReactiveProps(i(g))),{default:e.withCtx(()=>[e.createElementVNode("div",he,[e.createVNode(e.unref(s.QBtn),{onClick:a,label:"Fermer",color:"secondary",flat:"","no-caps":""})])]),_:2},1040)]),_:2},1536)]),_:2},1040)]),_:2},1040)]),_:1},8,["field"]))}}),Ce=e.defineComponent({__name:"CheckboxField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory().formStyleConfig;return{"onUpdate:modelValue":i=>n.modelValueOnUpdate(i),modelValue:n.modelValue,label:n.field.label,dense:r.fieldDense,color:r.fieldColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QCheckbox),e.normalizeProps(e.guardReactiveProps(o(i))),null,16)]),_:1},8,["field"]))}}),_e={class:"flex row items-center"},Se={class:"text-body1 text-weight-medium"},pe={class:"flex column q-gutter-sm"},ye=e.defineComponent({__name:"DefaultSectionComponent",props:{section:{}},setup(l){const t=l;return(o,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["flex column",t.section.cssClass])},[e.createElementVNode("div",_e,[t.section.icon?(e.openBlock(),e.createBlock(e.unref(s.QIcon),{key:0,name:t.section.icon,size:"sm"},null,8,["name"])):e.createCommentVNode("",!0),e.createElementVNode("div",Se,e.toDisplayString(t.section.label),1)]),e.createElementVNode("div",pe,[e.renderSlot(o.$slots,"default")])],2))}}),Be={class:"flex row items-center no-wrap"},ke=e.defineComponent({__name:"DefaultActionComponent",props:{isLoadingSubmit:{type:Boolean},reset:{type:Function},clear:{type:Function},submit:{type:Function}},setup(l){const t=l;return(o,n)=>(e.openBlock(),e.createElementBlock("div",Be,[e.createVNode(e.unref(s.QBtn),{label:"Enregistrer",loading:t.isLoadingSubmit,onClick:t.submit},null,8,["loading","onClick"]),t.reset?(e.openBlock(),e.createBlock(e.unref(s.QBtn),{key:0,loading:t.isLoadingSubmit,label:"Réinitialiser",onClick:t.reset},null,8,["loading","onClick"])):e.createCommentVNode("",!0),t.clear?(e.openBlock(),e.createBlock(e.unref(s.QBtn),{key:1,loading:t.isLoadingSubmit,label:"Vider",onClick:t.clear},null,8,["loading","onClick"])):e.createCommentVNode("",!0)]))}}),Fe=e.defineComponent({__name:"NumberField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory(),i=r.formSettings,a=r.formStyleConfig;return{"onUpdate:modelValue":c=>n.modelValueOnUpdate(c),modelValue:n.modelValue,lazyRules:i.rulesBehaviour==="lazy",clearable:n.field.clearable,rules:n.getComputedRules(),onClear:n.clear,label:n.field.label,hint:n.field.hint,outlined:a.fieldOutlined,filled:a.fieldFilled,standout:a.fieldStandout,borderless:a.fieldBorderless,rounded:a.fieldRounded,square:a.fieldSquare,dense:a.fieldDense,hideBottomSpace:a.fieldHideBottomSpace,color:a.fieldColor,bgColor:a.fieldBgColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QInput),e.mergeProps(o(i),{type:"number"}),null,16)]),_:1},8,["field"]))}}),Ne=e.defineComponent({__name:"SelectHasManyField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory(),i=r.formSettings,a=r.formStyleConfig;return{modelValue:n.modelValue,lazyRules:i.rulesBehaviour==="lazy",clearable:n.field.clearable,rules:n.getComputedRules(),multiple:!0,useChips:!0,mapOptions:!0,emitValue:!0,options:[],onClear:n.clear,label:n.field.label,hint:n.field.hint,outlined:a.fieldOutlined,filled:a.fieldFilled,standout:a.fieldStandout,borderless:a.fieldBorderless,rounded:a.fieldRounded,square:a.fieldSquare,dense:a.fieldDense,hideBottomSpace:a.fieldHideBottomSpace,color:a.fieldColor,bgColor:a.fieldBgColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QSelect),e.normalizeProps(e.guardReactiveProps(o(i))),null,16)]),_:1},8,["field"]))}}),De=(l,t)=>{const o=l.__vccOpts||l;for(const[n,r]of t)o[n]=r;return o},Ve={};function Te(l,t){return" TODO json edit ? "}const xe=De(Ve,[["render",Te]]),Oe=e.defineComponent({__name:"SelectField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory(),i=r.formSettings,a=r.formStyleConfig;return{"onUpdate:modelValue":c=>n.modelValueOnUpdate(c),modelValue:n.modelValue,lazyRules:i.rulesBehaviour==="lazy",clearable:n.field.clearable,rules:n.getComputedRules(),mapOptions:!0,emitValue:!0,options:n.field.selectOptions||[],onClear:n.clear,label:n.field.label,hint:n.field.hint,outlined:a.fieldOutlined,filled:a.fieldFilled,standout:a.fieldStandout,borderless:a.fieldBorderless,rounded:a.fieldRounded,square:a.fieldSquare,dense:a.fieldDense,hideBottomSpace:a.fieldHideBottomSpace,color:a.fieldColor,bgColor:a.fieldBgColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QSelect),e.normalizeProps(e.guardReactiveProps(o(i))),null,16)]),_:1},8,["field"]))}}),Re=e.defineComponent({__name:"SelectBelongsToField",props:{field:{}},setup(l){const t=l;function o(n){const r=n.injectForm.getFormFactory(),i=r.formSettings,a=r.formStyleConfig;return{modelValue:n.modelValue,lazyRules:i.rulesBehaviour==="lazy",clearable:n.field.clearable,rules:n.getComputedRules(),mapOptions:!0,emitValue:!0,options:[],onClear:n.clear,label:n.field.label,hint:n.field.hint,outlined:a.fieldOutlined,filled:a.fieldFilled,standout:a.fieldStandout,borderless:a.fieldBorderless,rounded:a.fieldRounded,square:a.fieldSquare,dense:a.fieldDense,hideBottomSpace:a.fieldHideBottomSpace,color:a.fieldColor,bgColor:a.fieldBgColor,class:n.field.cssClass}}return(n,r)=>(e.openBlock(),e.createBlock(_,{field:t.field},{default:e.withCtx(({propsWrapper:i})=>[e.createVNode(e.unref(s.QSelect),e.normalizeProps(e.guardReactiveProps(o(i))),null,16)]),_:1},8,["field"]))}}),$e=e.defineComponent({__name:"DefaultWrapperResetComponent",props:{reset:{type:Function}},setup(l){const t=l;return(o,n)=>{const r=e.resolveComponent("q-icon");return e.openBlock(),e.createBlock(r,{name:"reset",class:"cursor-pointer",onClick:n[0]||(n[0]=i=>t.reset())})}}});class y{constructor(t,o,n,r,i,a){h(this,"resourceName");h(this,"formSettings");h(this,"formStyleConfig");h(this,"actionComponent");h(this,"sectionComponent");h(this,"wrapperResetComponent");this.resourceName=t,this.formSettings={...y.getDefaultFormSettings(),...p.getGlobalFormSetting(),...o},this.formStyleConfig={...y.getDefaultFormStyleSettings(),...p.getGlobalFormStyleConfig(),...n},this.actionComponent=r??p.getGlobalActionComponent()??y.getDefaultActionComponent(),this.sectionComponent=i??p.getGlobalSectionComponent()??y.getDefaultSectionComponent(),this.wrapperResetComponent=a??p.getGlobalWrapperResetComponent()??y.getDefaultWrapperResetComponent()}static getFieldComponentByFormFieldType(t){return{string:me,text:ge,number:Fe,date:be,selectString:Oe,selectBelongsTo:Re,selectHasMany:Ne,checkbox:Ce,object:xe}[t]}static getDefaultFormSettings(){return{rulesBehaviour:"lazy",dateFormat:"DD/MM/YYYY",datetimeFormat:"DD/MM/YYYY:HHmm",renderBackendHint:!0}}static getDefaultFormStyleSettings(){return{fieldOutlined:!0,fieldDense:!0,fieldHideBottomSpace:!0,fieldFilled:!1,fieldStandout:!1,fieldBorderless:!1,fieldRounded:!1,fieldSquare:!1,fieldClass:"",fieldColor:"primary",fieldBgColor:"white"}}static getDefaultActionComponent(){return ke}static getDefaultSectionComponent(){return ye}static getDefaultWrapperResetComponent(){return $e}getAllField(t){const o=[];return t.form.sections.forEach(r=>{const i=[];r.fields.forEach(c=>{const f=y.getFieldComponentByFormFieldType(c.field_type),g={type:c.field_type,metadata:c,label:c.label,hint:c.hint,cssClass:c.css_class,selectOptions:c.select_options,rules:c.rules,clearable:c.clearable,resetable:c.resetable,component:f};i.push(g)});const a={label:r.label,icon:r.icon,cssClass:r.css_class,fields:i};o.push(a)}),{sections:o,cssClass:t.form.css_class,resetable:t.form.resetable,clearable:t.form.clearable,hasGlobalCustomValidation:t.form.has_global_custom_validation??!1}}}const we={key:0,class:"flex column q-pa-sm q-gutter-sm"},Ee=e.defineComponent({__name:"Submit64Form",props:{resourceName:{},resourceId:{},getMetadataAndData:{},submitForm:{},globalFormSettings:{},context:{}},setup(l,{expose:t}){const o=l;let n=null;const r=Object.freeze(new y(o.resourceName,o.globalFormSettings)),i=e.ref({}),a=e.ref(),c=e.ref(!1),f=e.ref(!1);async function g(){n=await o.getMetadataAndData({resourceName:o.resourceName,resourceId:o.resourceId,context:o.context}),a.value=Object.freeze(r.getAllField(n)),c.value=!0}async function d(){f.value=!0;const u={};Object.entries(i.value).forEach(S=>{u[S[0]]=S[1].getValue()});const C=await o.submitForm({formData:u});n&&(n.resource_data=C),b(),f.value=!1}function b(){Object.values(i.value).forEach(u=>{u.reset()})}function N(){Object.values(i.value).forEach(u=>{u.clear()})}function D(u,C){i.value[u]=C}function V(u){if(n)return n.resource_data[u]}function T(u){const C=Object.entries(i.value).find(S=>S[0]===u);return C?C[1].getValue():null}function x(){return r}return e.provide($,{registerRef:D,getDefaultDataByFieldName:V,getFieldDataByFieldName:T,getFormFactory:x}),t({}),e.onMounted(async()=>{await g()}),(u,C)=>c.value&&a.value?(e.openBlock(),e.createElementBlock("div",we,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value.sections,(S,O)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).sectionComponent),{key:O,section:S},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.fields,B=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:B.metadata.field_name},[u.$slots[B.metadata.field_name]?(e.openBlock(),e.createBlock(_,{key:1,field:B},{default:e.withCtx(({propsWrapper:R})=>[e.renderSlot(u.$slots,"default",{propsWrapper:R})]),_:2},1032,["field"])):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(B.component),{key:0,field:B},null,8,["field"]))],64))),128))]),_:2},1032,["section"]))),128)),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).actionComponent),{isLoadingSubmit:f.value,submit:d,clear:a.value.clearable?N:void 0,reset:a.value.resetable?b:void 0},null,8,["isLoadingSubmit","clear","reset"])),u.$slots.more_actions?e.renderSlot(u.$slots,"more_actions",{key:0,propsForm:{generatedForm:a.value}}):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}});m.Submit64=p,m.Submit64Form=Ee,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
