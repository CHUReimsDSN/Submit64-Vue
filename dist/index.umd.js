(function(m,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("quasar")):typeof define=="function"&&define.amd?define(["exports","vue","quasar"],e):(m=typeof globalThis<"u"?globalThis:m||self,e(m["submit64-vue"]={},m.Vue,m.Quasar))})(this,function(m,e,s){"use strict";var Ie=Object.defineProperty;var Ge=(m,e,s)=>e in m?Ie(m,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):m[e]=s;var h=(m,e,s)=>Ge(m,typeof e!="symbol"?e+"":e,s);const F=class F{constructor(){h(this,"_formSettings");h(this,"_formStyleConfig");h(this,"_actionComponent");h(this,"_sectionComponent");h(this,"_wrapperResetComponent")}static registerGlobalFormSetting(n){this._instance._formSettings=n}static registerGlobalFormStyleSetting(n){this._instance._formStyleConfig=n}static registerGlobalActionComponent(n){this._instance._actionComponent=n}static registerGlobalSectionComponent(n){this._instance._sectionComponent=n}static registerGlobalWrapperResetComponent(n){this._instance._wrapperResetComponent=n}static getGlobalFormSetting(){return this._instance._formSettings}static getGlobalFormStyleConfig(){return this._instance._formStyleConfig}static getGlobalActionComponent(){return this._instance._actionComponent}static getGlobalSectionComponent(){return this._instance._sectionComponent}static getGlobalWrapperResetComponent(){return this._instance._wrapperResetComponent}};h(F,"_instance",new F);let p=F;function E(o,n,l){const t=[],i=[];switch(l){case"date":t.push(ue(n.dateFormat))}return o.forEach(a=>{switch(a.type){case"required":t.push($());break;case"absence":t.push(L());break;case"acceptance":t.push(z());break;case"inclusion":const r=a;t.push(w(r.including));break;case"exclusion":const c=a;t.push(q(c.excluding));break;case"backend":t.push($());break;case"allowNull":i.push("allowNull");break;case"allowBlank":i.push("allowBlank");break;case"positiveNumber":t.push(I());break;case"lessThanOrEqualNumber":const u=a;if(u.less_than){t.push(G(()=>u.less_than));break}case"lessThanNumber":const g=a;if(g.less_than){t.push(U(()=>g.less_than));break}case"greaterThanOrEqualNumber":const d=a;if(d.greater_than){t.push(Q(()=>d.greater_than));break}case"greaterThanNumber":const b=a;if(b.greater_than){t.push(H(()=>b.greater_than));break}case"equalToNumber":const k=a;if(k.equal_to){t.push(A(()=>k.equal_to));break}case"otherThanNumber":const N=a;if(N.other_than){t.push(Y(()=>N.other_than));break}case"numberIntegerOnly":t.push(K());break;case"numberNumericOnly":t.push(J());break;case"numberEvenOnly":t.push(X());break;case"numberOddOnly":t.push(Z());break;case"lessThanOrEqualStringLength":const D=a;if(D.less_than){t.push(M(()=>D.less_than));break}case"lessThanStringLength":const V=a;if(V.less_than){t.push(W(()=>V.less_than));break}case"greaterThanOrEqualStringLength":const T=a;if(T.greater_than){t.push(v(()=>T.greater_than));break}case"greaterThanStringLength":const x=a;if(x.greater_than){t.push(ee(()=>x.greater_than));break}case"equalToString":const f=a;if(f.equal_to){t.push(ne(()=>f.equal_to));break}case"betweenStringLength":const C=a;t.push(te(()=>C.min,()=>C.max));break;case"equalToStringLength":const S=a;t.push(oe(()=>S.equal_to));break;case"otherThanString":const O=a;t.push(le(()=>O.other_than));break;case"lessThanOrEqualDate":const B=a;t.push(re(()=>B.less_than,n.dateFormat));break;case"lessThanDate":const R=a;t.push(ae(()=>R.less_than,n.dateFormat));break;case"greaterThanOrEqualDate":const Le=a;t.push(ie(()=>Le.greater_than,n.dateFormat));break;case"greaterThanDate":const ze=a;t.push(se(()=>ze.greater_than,n.dateFormat));break;case"equalToDate":const Pe=a;t.push(ce(()=>Pe.equal_to,n.dateFormat));break;case"otherThanDate":const je=a;t.push(de(()=>je.other_than,n.dateFormat));break}}),i.length>0?i.map(a=>{switch(a){case"allowBlank":return j(t);case"allowNull":return P(t)}}):t}function $(){return o=>!!o||"Ce champ est requis"}function w(o){return n=>o.includes(String(n))||`Doit être contenu dans ${o.toString()}`}function q(o){return n=>!o.includes(String(n)||`Ne doit pas être contenu dans ${w.toString()}`)}function L(){return o=>!o||"Ce champ doit être vide"}function z(){return o=>!!o||"Doit être accepté"}function P(o){return n=>(n===null||o.forEach(l=>{const t=l(n);if(t!==!0)return t}),!0)}function j(o){return n=>(n===""||o.forEach(l=>{const t=l(n);if(t!==!0)return t}),!0)}function I(){return o=>Number(o)>0||"Val. positive uniquement"}function G(o){return n=>{const l=o();return Number(n)<=l||`Inf. ou égal à ${l}`}}function U(o){return n=>{const l=o();return Number(n)<l||`Inf. ${l}`}}function Q(o){return n=>{const l=o();return Number(n)>=l||`Sup. ou égal à ${l}`}}function H(o){return n=>{const l=o();return Number(n)>l||`Sup. à ${l}`}}function A(o,n){const l=o();return t=>Number(t)===l||`Égale à ${l}`}function Y(o,n){const l=o();return t=>Number(t)!==l||`Doit être différent de ${o}`}function K(){return o=>/^-?\d+$/.test(String(o).trim())||"Nombre entier uniquement"}function J(){return o=>/^-?\d+(\.\d+)?$/.test(String(o).trim())||"Caractère numérique uniquement"}function X(){return o=>Number.isInteger(Number(o))&&Number(o)%2===0||"Nombre pair uniquement"}function Z(){return o=>Number.isInteger(Number(o))&&Number(o)%2===1||"Nombre impair uniquement"}function M(o){const n=o();return l=>String(l).length<=n||`Inf. ou égal à ${n}`}function W(o){const n=o();return l=>String(l).length<n||`Inf. à ${n}`}function v(o){const n=o();return l=>String(l).length>=n||`Sup. ou égal à ${n}`}function ee(o){const n=o();return l=>String(l).length>n||`Sup. à ${n}`}function te(o,n){const l=o(),t=n();return i=>String(i).length>=l&&String(i).length<=t||`Entre ${l} et ${t}`}function ne(o,n){const l=o();return t=>String(t)===l||`Égale à ${l}`}function oe(o){const n=o();return l=>String(l).length===n||`Doit contenir ${n} caractères`}function le(o,n){const l=o();return t=>String(t)!==l||`Doit être différent de ${l}`}function re(o,n){const l=o();return t=>!Number.isNaN(s.date.extractDate(String(t),n).getTime())&&s.date.extractDate(String(t),n)<=s.date.extractDate(l,n)||`Inf. ou égal à ${s.date.formatDate(l,n)}`}function ae(o,n){const l=o();return t=>!Number.isNaN(s.date.extractDate(String(t),n).getTime())&&s.date.extractDate(String(t),n)<s.date.extractDate(l,n)||`Inf. à ${s.date.formatDate(l,n)}`}function ie(o,n){const l=o();return t=>!Number.isNaN(s.date.extractDate(String(t),n).getTime())&&s.date.extractDate(String(t),n)>=s.date.extractDate(l,n)||`Sup. ou égal à ${s.date.formatDate(l,n)}`}function se(o,n){const l=o();return t=>!Number.isNaN(s.date.extractDate(String(t),n).getTime())&&s.date.extractDate(String(t),n)>s.date.extractDate(l,n)||`Sup. à ${s.date.formatDate(l,n)}`}function ce(o,n,l){const t=o();return i=>s.date.extractDate(String(i),n)===s.date.extractDate(t,n)||`Égale à ${s.date.extractDate(t,n)}`}function de(o,n,l){const t=o();return i=>s.date.extractDate(String(i),n)!==s.date.extractDate(t,n)||`Doit être différent de ${t}`}function ue(o){return n=>!Number.isNaN(s.date.extractDate(String(n),o).getTime())||"Date invalide"}const fe={computeServerRules:E},_=e.defineComponent({__name:"FieldWrapper",props:{field:{}},setup(o,{expose:n}){const l=o,t=e.inject(l.field.provideUniqKey),i=e.ref();function a(){return i.value}function r(){t&&(i.value=t.getDefaultDataByFieldName(l.field.metadata.field_name))}function c(){switch(typeof i.value){case"boolean":i.value=!1;case"string":i.value="";case"number":i.value=0;case"object":i.value={}}}function u(){return fe.computeServerRules(l.field.rules??[],t.getFormFactory().formSettings,l.field.type)}function g(d){i.value=d}return n({reset:r,clear:c,getValue:a}),e.onMounted(()=>{var b;r();const d=(b=e.getCurrentInstance())==null?void 0:b.proxy;d&&t&&t.registerRef(l.field.metadata.field_name,d)}),(d,b)=>(e.openBlock(),e.createElementBlock("div",null,[l.field.resetable?e.renderSlot(d.$slots,"reset",{key:0,actionProps:{reset:r}},()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(t).getFormFactory().wrapperResetComponent),{reset:r}))]):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"default",{propsWrapper:{modelValue:i.value,modelValueOnUpdate:g,field:d.field,injectForm:e.unref(t),reset:r,clear:c,getComputedRules:u}})]))}}),me=e.defineComponent({__name:"StringField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory(),a=i.formSettings,r=i.formStyleConfig;return{"onUpdate:modelValue":c=>t.modelValueOnUpdate(c),modelValue:t.modelValue,lazyRules:a.rulesBehaviour==="lazy",clearable:t.field.clearable,rules:t.getComputedRules(),onClear:t.clear,label:t.field.label,hint:t.field.hint,outlined:r.fieldOutlined,filled:r.fieldFilled,standout:r.fieldStandout,borderless:r.fieldBorderless,rounded:r.fieldRounded,square:r.fieldSquare,dense:r.fieldDense,hideBottomSpace:r.fieldHideBottomSpace,color:r.fieldColor,bgColor:r.fieldBgColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QInput),e.normalizeProps(e.guardReactiveProps(l(a))),null,16)]),_:1},8,["field"]))}}),ge=e.defineComponent({__name:"TextField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory(),a=i.formSettings,r=i.formStyleConfig;return{"onUpdate:modelValue":c=>t.modelValueOnUpdate(c),modelValue:t.modelValue,lazyRules:a.rulesBehaviour==="lazy",clearable:t.field.clearable,rules:t.getComputedRules(),onClear:t.clear,label:t.field.label,hint:t.field.hint,outlined:r.fieldOutlined,filled:r.fieldFilled,standout:r.fieldStandout,borderless:r.fieldBorderless,rounded:r.fieldRounded,square:r.fieldSquare,dense:r.fieldDense,hideBottomSpace:r.fieldHideBottomSpace,color:r.fieldColor,bgColor:r.fieldBgColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QInput),e.mergeProps(l(a),{type:"textarea"}),null,16)]),_:1},8,["field"]))}}),he={class:"row items-center justify-end"},be=e.defineComponent({__name:"DateField",props:{field:{}},setup(o){const n=o,l=e.ref();function t(c){const u=c.injectForm.getFormFactory(),g=u.formSettings,d=u.formStyleConfig;return{"onUpdate:modelValue":b=>c.modelValueOnUpdate(b),modelValue:c.modelValue,lazyRules:g.rulesBehaviour==="lazy",clearable:c.field.clearable,rules:c.getComputedRules(),onClear:c.clear,label:c.field.label,hint:c.field.hint,outlined:d.fieldOutlined,filled:d.fieldFilled,standout:d.fieldStandout,borderless:d.fieldBorderless,rounded:d.fieldRounded,square:d.fieldSquare,dense:d.fieldDense,hideBottomSpace:d.fieldHideBottomSpace,color:d.fieldColor,bgColor:d.fieldBgColor,class:c.field.cssClass}}function i(c){return{size:"sm",color:"primary",name:"event",class:"cursor-pointer"}}function a(c){return{"onUpdate:modelValue":u=>c.modelValueOnUpdate(u),modelValue:c.modelValue,mask:c.injectForm.getFormFactory().formSettings.dateFormat}}function r(){l.value&&l.value.hide()}return(c,u)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:g})=>[e.createVNode(e.unref(s.QInput),e.normalizeProps(e.guardReactiveProps(t(g))),{append:e.withCtx(()=>[e.createVNode(e.unref(s.QIcon),e.normalizeProps(e.guardReactiveProps(i())),{default:e.withCtx(()=>[e.createVNode(e.unref(s.QPopupProxy),{ref_key:"popupProxyRef",ref:l,cover:"","transition-show":"scale","transition-hide":"scale"},{default:e.withCtx(()=>[e.createVNode(e.unref(s.QDate),e.normalizeProps(e.guardReactiveProps(a(g))),{default:e.withCtx(()=>[e.createElementVNode("div",he,[e.createVNode(e.unref(s.QBtn),{onClick:r,label:"Fermer",color:"secondary",flat:"","no-caps":""})])]),_:2},1040)]),_:2},1536)]),_:2},1040)]),_:2},1040)]),_:1},8,["field"]))}}),Ce=e.defineComponent({__name:"CheckboxField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory().formStyleConfig;return{"onUpdate:modelValue":a=>t.modelValueOnUpdate(a),modelValue:t.modelValue,label:t.field.label,dense:i.fieldDense,color:i.fieldColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QCheckbox),e.normalizeProps(e.guardReactiveProps(l(a))),null,16)]),_:1},8,["field"]))}}),_e={class:"flex row items-center"},Se={class:"text-body1 text-weight-medium"},pe={class:"flex column q-gutter-sm"},ye=e.defineComponent({__name:"DefaultSectionComponent",props:{section:{}},setup(o){const n=o;return(l,t)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["flex column",n.section.cssClass])},[e.createElementVNode("div",_e,[n.section.icon?(e.openBlock(),e.createBlock(e.unref(s.QIcon),{key:0,name:n.section.icon,size:"sm"},null,8,["name"])):e.createCommentVNode("",!0),e.createElementVNode("div",Se,e.toDisplayString(n.section.label),1)]),e.createElementVNode("div",pe,[e.renderSlot(l.$slots,"default")])],2))}}),Be={class:"flex row items-center no-wrap q-pt-sm"},ke=e.defineComponent({__name:"DefaultActionComponent",props:{isLoadingSubmit:{type:Boolean},reset:{type:Function},clear:{type:Function},submit:{type:Function}},setup(o){const n=o;return(l,t)=>(e.openBlock(),e.createElementBlock("div",Be,[e.createVNode(e.unref(s.QBtn),{label:"Enregistrer",loading:n.isLoadingSubmit,onClick:n.submit},null,8,["loading","onClick"]),n.reset?(e.openBlock(),e.createBlock(e.unref(s.QBtn),{key:0,loading:n.isLoadingSubmit,label:"Réinitialiser",onClick:n.reset},null,8,["loading","onClick"])):e.createCommentVNode("",!0),n.clear?(e.openBlock(),e.createBlock(e.unref(s.QBtn),{key:1,loading:n.isLoadingSubmit,label:"Vider",onClick:n.clear},null,8,["loading","onClick"])):e.createCommentVNode("",!0)]))}}),Fe=e.defineComponent({__name:"NumberField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory(),a=i.formSettings,r=i.formStyleConfig;return{"onUpdate:modelValue":c=>t.modelValueOnUpdate(c),modelValue:t.modelValue,lazyRules:a.rulesBehaviour==="lazy",clearable:t.field.clearable,rules:t.getComputedRules(),onClear:t.clear,label:t.field.label,hint:t.field.hint,outlined:r.fieldOutlined,filled:r.fieldFilled,standout:r.fieldStandout,borderless:r.fieldBorderless,rounded:r.fieldRounded,square:r.fieldSquare,dense:r.fieldDense,hideBottomSpace:r.fieldHideBottomSpace,color:r.fieldColor,bgColor:r.fieldBgColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QInput),e.mergeProps(l(a),{type:"number"}),null,16)]),_:1},8,["field"]))}}),Ne=e.defineComponent({__name:"SelectHasManyField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory(),a=i.formSettings,r=i.formStyleConfig;return{modelValue:t.modelValue,lazyRules:a.rulesBehaviour==="lazy",clearable:t.field.clearable,rules:t.getComputedRules(),multiple:!0,useChips:!0,mapOptions:!0,emitValue:!0,options:[],onClear:t.clear,label:t.field.label,hint:t.field.hint,outlined:r.fieldOutlined,filled:r.fieldFilled,standout:r.fieldStandout,borderless:r.fieldBorderless,rounded:r.fieldRounded,square:r.fieldSquare,dense:r.fieldDense,hideBottomSpace:r.fieldHideBottomSpace,color:r.fieldColor,bgColor:r.fieldBgColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QSelect),e.normalizeProps(e.guardReactiveProps(l(a))),null,16)]),_:1},8,["field"]))}}),De=(o,n)=>{const l=o.__vccOpts||o;for(const[t,i]of n)l[t]=i;return l},Ve={};function Te(o,n){return" TODO json edit ? "}const xe=De(Ve,[["render",Te]]),Oe=e.defineComponent({__name:"SelectField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory(),a=i.formSettings,r=i.formStyleConfig;return{"onUpdate:modelValue":c=>t.modelValueOnUpdate(c),modelValue:t.modelValue,lazyRules:a.rulesBehaviour==="lazy",clearable:t.field.clearable,rules:t.getComputedRules(),mapOptions:!0,emitValue:!0,options:t.field.selectOptions||[],onClear:t.clear,label:t.field.label,hint:t.field.hint,outlined:r.fieldOutlined,filled:r.fieldFilled,standout:r.fieldStandout,borderless:r.fieldBorderless,rounded:r.fieldRounded,square:r.fieldSquare,dense:r.fieldDense,hideBottomSpace:r.fieldHideBottomSpace,color:r.fieldColor,bgColor:r.fieldBgColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QSelect),e.normalizeProps(e.guardReactiveProps(l(a))),null,16)]),_:1},8,["field"]))}}),Re=e.defineComponent({__name:"SelectBelongsToField",props:{field:{}},setup(o){const n=o;function l(t){const i=t.injectForm.getFormFactory(),a=i.formSettings,r=i.formStyleConfig;return{modelValue:t.modelValue,lazyRules:a.rulesBehaviour==="lazy",clearable:t.field.clearable,rules:t.getComputedRules(),mapOptions:!0,emitValue:!0,options:[],onClear:t.clear,label:t.field.label,hint:t.field.hint,outlined:r.fieldOutlined,filled:r.fieldFilled,standout:r.fieldStandout,borderless:r.fieldBorderless,rounded:r.fieldRounded,square:r.fieldSquare,dense:r.fieldDense,hideBottomSpace:r.fieldHideBottomSpace,color:r.fieldColor,bgColor:r.fieldBgColor,class:t.field.cssClass}}return(t,i)=>(e.openBlock(),e.createBlock(_,{field:n.field},{default:e.withCtx(({propsWrapper:a})=>[e.createVNode(e.unref(s.QSelect),e.normalizeProps(e.guardReactiveProps(l(a))),null,16)]),_:1},8,["field"]))}}),$e=e.defineComponent({__name:"DefaultWrapperResetComponent",props:{reset:{type:Function}},setup(o){const n=o;return(l,t)=>{const i=e.resolveComponent("q-icon");return e.openBlock(),e.createBlock(i,{name:"reset",class:"cursor-pointer",onClick:t[0]||(t[0]=a=>n.reset())})}}});class y{constructor(n,l,t,i,a,r){h(this,"resourceName");h(this,"formSettings");h(this,"formStyleConfig");h(this,"actionComponent");h(this,"sectionComponent");h(this,"wrapperResetComponent");this.resourceName=n,this.formSettings={...y.getDefaultFormSettings(),...p.getGlobalFormSetting(),...l},this.formStyleConfig={...y.getDefaultFormStyleSettings(),...p.getGlobalFormStyleConfig(),...t},this.actionComponent=i??p.getGlobalActionComponent()??y.getDefaultActionComponent(),this.sectionComponent=a??p.getGlobalSectionComponent()??y.getDefaultSectionComponent(),this.wrapperResetComponent=r??p.getGlobalWrapperResetComponent()??y.getDefaultWrapperResetComponent()}static getFieldComponentByFormFieldType(n){return{string:me,text:ge,number:Fe,date:be,selectString:Oe,selectBelongsTo:Re,selectHasMany:Ne,checkbox:Ce,object:xe}[n]}static getDefaultFormSettings(){return{rulesBehaviour:"lazy",dateFormat:"DD/MM/YYYY",datetimeFormat:"DD/MM/YYYY:HHmm",renderBackendHint:!0}}static getDefaultFormStyleSettings(){return{fieldOutlined:!0,fieldDense:!0,fieldHideBottomSpace:!0,fieldFilled:!1,fieldStandout:!1,fieldBorderless:!1,fieldRounded:!1,fieldSquare:!1,fieldClass:"",fieldColor:"primary",fieldBgColor:"white"}}static getDefaultActionComponent(){return ke}static getDefaultSectionComponent(){return ye}static getDefaultWrapperResetComponent(){return $e}getAllField(n,l){const t=[];return n.form.sections.forEach(a=>{const r=[];a.fields.forEach(u=>{const g=y.getFieldComponentByFormFieldType(u.field_type),d={type:u.field_type,metadata:u,label:u.label,hint:u.hint,cssClass:u.css_class,selectOptions:u.select_options,rules:u.rules,clearable:u.clearable,resetable:u.resetable,provideUniqKey:l,component:g};r.push(d)});const c={label:a.label,icon:a.icon,cssClass:a.css_class,fields:r};t.push(c)}),{sections:t,cssClass:n.form.css_class,resetable:n.form.resetable,clearable:n.form.clearable,hasGlobalCustomValidation:n.form.has_global_custom_validation??!1}}}function we(o){return Symbol(o)}const Ee={key:0,class:"flex column"},qe=e.defineComponent({__name:"Submit64Form",props:{resourceName:{},resourceId:{},getMetadataAndData:{},submitForm:{},globalFormSettings:{},context:{}},setup(o,{expose:n}){const l=o;let t=null;const i=Object.freeze(new y(l.resourceName,l.globalFormSettings)),a=we(s.uid()),r=e.ref({}),c=e.ref(),u=e.ref(!1),g=e.ref(!1);async function d(){t=await l.getMetadataAndData({resourceName:l.resourceName,resourceId:l.resourceId,context:l.context}),c.value=Object.freeze(i.getAllField(t,a)),u.value=!0}async function b(){g.value=!0;const f={};Object.entries(r.value).forEach(S=>{f[S[0]]=S[1].getValue()});const C=await l.submitForm({formData:f});t&&(t.resource_data=C),k(),g.value=!1}function k(){Object.values(r.value).forEach(f=>{f.reset()})}function N(){Object.values(r.value).forEach(f=>{f.clear()})}function D(f,C){r.value[f]=C}function V(f){if(t)return t.resource_data[f]}function T(f){const C=Object.entries(r.value).find(S=>S[0]===f);return C?C[1].getValue():null}function x(){return i}return e.provide(a,{registerRef:D,getDefaultDataByFieldName:V,getFieldDataByFieldName:T,getFormFactory:x}),n({}),e.onMounted(async()=>{await d()}),(f,C)=>u.value&&c.value?(e.openBlock(),e.createElementBlock("div",Ee,[e.createElementVNode("div",{class:e.normalizeClass(c.value.cssClass??"flex column q-pa-sm q-gutter-sm")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value.sections,(S,O)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(i).sectionComponent),{key:O,section:S},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.fields,B=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:B.metadata.field_name},[f.$slots[B.metadata.field_name]?(e.openBlock(),e.createBlock(_,{key:1,field:B},{default:e.withCtx(({propsWrapper:R})=>[e.renderSlot(f.$slots,"default",{propsWrapper:R})]),_:2},1032,["field"])):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(B.component),{key:0,field:B},null,8,["field"]))],64))),128))]),_:2},1032,["section"]))),128))],2),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(i).actionComponent),{isLoadingSubmit:g.value,submit:b,clear:c.value.clearable?N:void 0,reset:c.value.resetable?k:void 0},null,8,["isLoadingSubmit","clear","reset"])),f.$slots.more_actions?e.renderSlot(f.$slots,"more_actions",{key:0,propsForm:{generatedForm:c.value}}):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}});m.Submit64=p,m.Submit64Form=qe,Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});
